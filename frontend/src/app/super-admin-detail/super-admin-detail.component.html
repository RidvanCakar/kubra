<div class="container p-4">
  <div class="grid gap-4">
    <div class="bg-white shadow-lg rounded-lg p-6">
      <button
        class="py-3 float-right px-6 bg-info text-white rounded-full hover:bg-red:700 focus:outline-none focus:ring-2 focus:ring-red-500 transition-all duration-300"
        (click)="logout()">
        Çıkış Yap
      </button>
      <h2 class="text-xl font-bold text-gray-700 mb-4">Kullanıcılar</h2>
      <div class="overflow-x-auto">
        <table class="w-full border border-gray-200 rounded-lg">
          <thead class="bg-blue-500 text-white">
            <tr class="text-center">
              <th class="px-4 py-2">ID</th>
              <th class="px-4 py-2">Kullanıcı Adı</th>
              <th class="px-4 py-2">Email</th>
              <th class="px-4 py-2">Rolü</th>
              <th class="px-4 py-2">Aksiyonlar</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let user of userWithRoles" class="border-b hover:bg-gray-100 text-center">
              <td class="px-4 py-2">{{ user.id }}</td>
              <td class="px-4 py-2">{{ user.username }}</td>
              <td class="px-4 py-2">{{ user.email }}</td>
              <td class="px-4 py-2">{{ user.rolName }}</td>
              <td class="px-4 py-2 flex space-x-2">
                <button class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition duration-300 mr-4"
                  (click)="deleteUser(user)">
                  Kullanıcıyı Sil
                </button>
                <button
                  class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition duration-300 mr-4"
                  (click)="onSelectUser(user)">
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="bg-white shadow-lg rounded-lg p-6">
      <h2 class="text-xl font-bold text-gray-700 mb-4">Ürünler</h2>
      <div class="overflow-x-auto">
        <table class="w-full border border-gray-200 rounded-lg">
          <thead class="bg-green-500 text-white">
            <tr class="text-center">
              <th class="px-4 py-2">ID</th>
              <th class="px-4 py-2">Satıcı Adı</th>
              <th class="px-4 py-2">Ürün Adı</th>
              <th class="px-4 py-2">Fiyat</th>
              <th class="px-4 py-2">Görsel</th>
              <th class="px-4 py-2">Stok</th>
              <th class="px-4 py-2">Kategori</th>
              <th class="px-4 py-2">Aksiyonlar</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let product of products" class="border-b hover:bg-gray-100 text-center">
              <td class="px-4 py-2">{{ product.id }}</td>
              <td class="px-4 py-2">{{ product.userName }}</td>
              <td class="px-4 py-2">{{ product.name }}</td>
              <td class="px-4 py-2">{{ product.price }} TL</td>
              <td class="px-4 py-2">
                <img [src]="product.imageUrl" alt="Ürün Resmi" class="w-12 h-12 object-cover rounded">
              </td>
              <td class="px-4 py-2">{{ product.stock }}</td>
              <td class="px-4 py-2">{{ product.categoryName }}</td>
              <td class="px-4 py-2 flex space-x-2">
                <button class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition duration-300 mr-4"
                  (click)="deleteProduct(product)">
                  Ürünü Sil
                </button>
                <button class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition duration-300"
                  (click)="onSelectProduct(product)">
                  Ürünü Güncelle
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <div *ngIf="selectedProduct" class="mt-3">
      <input type="hidden" #id name="id" [value]="selectedProduct.id">

      <div class="card shadow-sm p-3">
        <h5 class="text-center text-info">Ürünü Düzenle</h5>

        <div class="form-group">
          <label for="name" class="text-info">Ürün Adı</label>
          <input [(ngModel)]="selectedProduct.name" type="text" class="form-control" name="name">
        </div>
        <div class="form-group">
          <label for="price" class="text-info">Fiyat</label>
          <input [(ngModel)]="selectedProduct.price" type="number" class="form-conİtrol" name="price">
        </div>
        <div class="form-group">
          <label for="categoryId" class="text-info">Kategori ID</label>
          <input [(ngModel)]="selectedProduct.categoryId" type="number" class="form-control" name="categoryId">
        </div>
        <div class="form-group">
          <label for="imageUrl" class="text-info">Görsel URL</label>
          <input [(ngModel)]="selectedProduct.imageUrl" type="text" class="form-control" name="imageUrl">
        </div>
        <div class="form-group">
          <label for="stock" class="text-info">Stock</label>
          <input [(ngModel)]="selectedProduct.stock" type="text" class="form-control" name="stock">
        </div>
        <button class="btn btn-success w-100 py-2 mt-3" (click)="editProduct(selectedProduct)">Ürünü Düzenle</button>
      </div>
    </div>

    <div *ngIf="selectedUser" class="mt-3">
      <input type="hidden" #id name="id" [value]="selectedUser.id">
      <div class="card shadow-sm p-3">
        <h5 class="text-center text-info">Ürünü Düzenle</h5>

        <div class="form-group">
          <label for="username" class="text-info">Username</label>
          <input [(ngModel)]="selectedUser.username" type="text" class="form-control" name="username">
        </div>
        <div class="form-group">
          <label for="email" class="text-info">E-mail</label>
          <input [(ngModel)]="selectedUser.email" type="text" class="form-conİtrol" name="email">
        </div>

        <button class="btn btn-success w-100 py-2 mt-3" (click)="editUser(selectedUser)">Ürünü Düzenle</button>
      </div>
    </div>
  </div>
